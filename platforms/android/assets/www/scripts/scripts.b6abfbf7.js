"use strict";angular.module("rssTripApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngMaterial","ui.router"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("home",{url:"",views:{base:{templateUrl:"views/main.html",controller:"MainCtrl"}}}).state("detail",{url:"/detail",views:{base:{templateUrl:"views/detail.html",controller:"DetailCtrl"}}})}]),angular.module("rssTripApp").factory("cordova",["$q","$window",function(a,b){var c=a.defer(),d=!1;return this.ready=c.promise,document.addEventListener("deviceready",function(){d=!0,c.resolve(b.cordova)}),setTimeout(function(){d||b.cordova&&c.resolve(b.cordova)},3e3),this}]),angular.module("rssTripApp").service("rssService",["$q",function(a){this.currentPlace,this.output=[],this.feedDataUrl="http://www.prajavani.net/taxonomy/term/70/all/feed",this.routeBaseUrl="http://www.prajavani.net/",this.setPlaceInfo=function(a){this.currentPlace=a},this.getPlaceInfo=function(){return this.currentPlace},this.getImages=function(a){var b=$(a).find("img");if(b.length)var c=this.routeBaseUrl+$(b[0]).attr("src");return c},this.parseEntry=function(a){var b=[],c=this;return angular.forEach(a,function(a,b){var d={};d.title=a.title,d.content=$(a.content).text(),d.publishedDate=a.publishedDate,d.path=c.getImages(a.content),this.push(d)},b),b},this.getFeedData=function(){var b=this,c=a.defer(),d=new google.feeds.Feed(this.feedDataUrl);return d.setNumEntries(50),d.load(function(a){var d=a.feed.entries;this.output=b.parseEntry(d),c.resolve(this.output)}),c.promise}}]),google.load("feeds","1"),angular.module("rssTripApp").controller("MainCtrl",["$scope","$state","cordova","rssService",function(a,b,c,d){c.ready.then(function(){console.log("Cordova is ready")}),d.getFeedData().then(function(b){a.tripData=b},function(a){console.log("error",a)}),a.onListClick=function(a){d.setPlaceInfo(a),b.go("detail")}}]),angular.module("rssTripApp").controller("DetailCtrl",["$scope","$state","rssService",function(a,b,c){a.place=c.getPlaceInfo(),a.goBack=function(){b.go("home")}}]);